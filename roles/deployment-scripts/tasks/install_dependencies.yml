---
# Tasks file for installing deployment repository dependencies

- name: Activate sanger-pathogens-deployment conda environment
  shell: "source {{ conda_activate }} sanger-pathogens-deployment"
  args:
    executable: /bin/bash

- name: Install deployment dependencies with cpanm
  block:
    - name: Install Net::SCP with cpanm
      shell: "sudo cpanm Net::SCP"

    - name: Install Git::Repository with cpanm
      shell: "sudo cpanm Git::Repository"
      # Available via conda conda install -c dan_blanchard perl-git-repository 

    - name: Install YAML::XS with cpanm
      shell: "sudo cpanm YAML::XS"
    # Available via conda conda install -c eumetsat perl-yaml-xs

- name: Dectivate sanger-pathogens-deployment conda environment
  shell: "source {{ conda_deactivate }}"
  args:
    executable: /bin/bash